
/*

var a;
var b;
for (;;)
{
    var t = a;
    a = b;
    b = t;

}

*/


function advance( bodies, dt )
{
    for ( var bi : bodies )
    {
        for ( var bj : bodies )
        {
            var dx, dy, dz = bi.x - bj.x, bi.y - bj.y, bi.z - bj.z;
            var distance = sqrt( dx * dx + dy * dy + dz * dz );
            var mag = dt / ( distance * distance * distance );
            var bim, bjm = bi.mass * mag, bj.mass * mag;
            bi.vx -= dx * bjm;
            bi.vy -= dy * bjm;
            bi.vz -= dz * bjm;
            bj.vx += dx * bim;
            bj.vy += dy * bim;
            bj.vz += dz * bim;
        }
    }
    for ( var bi : bodies )
    {
        bi.x += dt * bi.vx;
        bi.y += dt * bi.vy;
        bi.z += dt * bi.vz;
    }
}